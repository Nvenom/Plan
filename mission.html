<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://nvenom.github.io/Plan/stylesheets/normalize.css" rel="stylesheet" type="text/css" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
    <link href="https://nvenom.github.io/Plan/stylesheets/stylesheet.css" rel="stylesheet" type="text/css" media="screen">
    <link href="https://nvenom.github.io/Plan/stylesheets/github-light.css" rel="stylesheet" type="text/css" media="screen">
    <style>
        input[type=number]{
            border: none;
        }
    </style>
</head>
<body>
  <section class="page-header">
    <h1 class="project-name">Waraegis</h1>
    <h2 class="project-tagline">Agent Training Courses</h2>
    <a href="https://github.com/Nvenom/Plan" class="btn">View on GitHub</a>
    <a href="https://github.com/Nvenom/Plan/zipball/master" class="btn">Download .zip</a>
    <a href="https://github.com/Nvenom/Plan/tarball/master" class="btn">Download .tar.gz</a>
  </section>

  <section class="main-content">
    <h3>Agent Skills</h3>
    <table>
        <tr>
            <th>Skills</th>
            <th>Graph</th>
        </tr>
        <tr>
            <td style="width:60%;">

    <table id="main_skills" class="tbl">
      <tr>
        <th>Skill</th>
        <th>Description</th>
        <th>Total Effectiveness</th>
      </tr>
      <tr>
        <td>Discipline</td>
        <td>Is used as a critical modifyer in a Agents training</td>
        <td><input id="t_discipline" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Marksmanship</td>
        <td>Weapon Handling</td>
        <td><input id="t_marksmanship" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Tactics</td>
        <td>Effective Movement and strategy</td>
        <td><input id="t_tactics" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Fighting</td>
        <td>Ability to defend yourself in close quarters</td>
        <td><input id="t_fighting" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Conditioning</td>
        <td>Endurance and raw potential strength & ability to fight torture</td>
        <td><input id="t_conditioning" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Leadership</td>
        <td>Your men will follow you through hell</td>
        <td><input id="t_leadership" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Medical</td>
        <td>Ability to handle wounds</td>
        <td><input id="t_medical" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Explosives</td>
        <td>Ability to handle explosives and booby traps</td>
        <td><input id="t_explosives" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Navigation</td>
        <td>Ability to find your way to or out of the shit</td>
        <td><input id="t_navigation" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Deception</td>
        <td>Stalking, stealth, spies.. all that good stuff</td>
        <td><input id="t_deception" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Electronics</td>
        <td>Electrical Hardware knowledge</td>
        <td><input id="t_electronics" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Programming</td>
        <td>Software and hacking skills</td>
        <td><input id="t_programming" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Intelligence</td>
        <td>Gather that intel agent!</td>
        <td><input id="t_intelligence" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Persuasion</td>
        <td>Ability to convice people to do stuff or interrogate for information</td>
        <td><input id="t_persuasion" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Driving</td>
        <td>Ability to operate motor vehicles</td>
        <td><input id="t_driving" type="number" value="0" readonly></td>
      </tr>
      <tr>
        <td>Piloting</td>
        <td>Ability to operate aircraft</td>
        <td><input id="t_piloting" type="number" value="0" readonly></td>
      </tr>
    </table>

            </td>
            <td style="width:40%;"><canvas id="myChart" style="width:100%;height:100%;"></canvas></td>
        </tr>
    </table>

    <br/>
    <h3>Training Courses</h3>
    <table id="trainingcourses">
      <tr>
        <th>Select</th>
        <th>Course ID</th>
        <th>Course Name</th>
        <th>Course Length</th>
        <th>Course Effect</th>
      </tr>
    </table>
    <footer class="site-footer">
      <span class="site-footer-owner"><a href="https://github.com/Nvenom/WarAegis">Waraegis</a> is maintained by <a href="https://github.com/Nvenom">Nvenom</a>.</span>
    </footer>

  </section>


</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://nvenom.github.io/Plan/javascript/chart.min.js"></script>
<script src="https://nvenom.github.io/Plan/javascript/courselist.js"></script>
<script>

$.each(courseList, function(i,v){

    var content='<tr><td><input type="checkbox" name="chk" data-table="#t' + i + '"></td><td>' + i + '</td><td>' + this['name'] + '</td><td><input type="number" name="clen" value="0"></td><td><table id="t' + i + '">';
    
    $.each(this['effect'], function(o,b){
        content = content + '<tr><td><input type="number" name="statv" data-percent="' + this['percent'] + '" data-skill="#t_' + this['name'] + '" value="0"></td><td>' + this['name'] + '</td></tr>';
    });

    content = content + '</table></td></tr>';
    
    $('#trainingcourses').append(content);

});


function calculate_skills(){
    $('#main_skills').find('input').each(function() {
        $(this).val(0);
    });
    
    var i = 0;
    while(i < 16){
        myRadarChart.data.datasets[0].data[i] = 0;
        i++;
    }

    $.map($('input:checkbox[name=chk]:checked'), function(el) {

        var table = $(el).data('table');

        $(table).find('input').each(function() {

            var disc = Number($('#t_discipline').val());

            var skill = $(this).data('skill');
            var incre = Number($(this).val());
            var curre = Number($(skill).val());
            
            if(skill !== '#t_discipline'){

                var roll = Math.round(Math.random() * (100 - 1));

                if(roll <= disc){
                    console.log(roll);
                    console.log(incre * 1.20);
                    console.log(Math.round(incre * 1.20));
                    var incre = Math.round(incre * 1.20);
                }

            }

            if(skill == '#t_discipline')  { var p = 0; }  else
            if(skill == '#t_marksmanship'){ var p = 1; }  else
            if(skill == '#t_tactics')     { var p = 2; }  else
            if(skill == '#t_fighting')    { var p = 3; }  else
            if(skill == '#t_conditioning'){ var p = 4; }  else
            if(skill == '#t_leadership')  { var p = 5; }  else
            if(skill == '#t_medical')     { var p = 6; }  else
            if(skill == '#t_explosives')  { var p = 7; }  else
            if(skill == '#t_navigation')  { var p = 8; }  else
            if(skill == '#t_deception')   { var p = 9; }  else
            if(skill == '#t_electronics') { var p = 10; } else
            if(skill == '#t_programming') { var p = 11; } else
            if(skill == '#t_intelligence'){ var p = 12; } else
            if(skill == '#t_persuasion')  { var p = 13; } else
            if(skill == '#t_driving')     { var p = 14; } else
            if(skill == '#t_piloting')    { var p = 15; }

            $(skill).val(curre + incre);

            myRadarChart.data.datasets[0].data[p] = curre + incre; // Would update the first dataset's value of 'March' to be 50

        });

    });

    myRadarChart.update();

}

$('[name=chk]').click(function(e) {
    calculate_skills();
});

$('[name=clen]').change(function(e) {

    var clen = Number($(this).val());   

    $(this).parent().parent().find('[name=statv]').each(function() {
        
        var perc = Number($(this).data('percent'));
        var newval = Math.round(clen * perc);
        $(this).val(newval);

    });

});

var myRadarChart = new Chart($('#myChart'), {
    type: 'radar',
    data: {
        labels: ["Discipline", "Marksmanship", "Tactics", "Fighting", "Conditioning", "Leadership", "Medical", "Explosives", "Navigation", "Deception", "Electronics", "Programming", "Intelligence", "Persuasion", "Driving", "Piloting"],
        datasets: [{
            label: 'Effectiveness',
            data: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            options: {
                scales: {
                    display: false
                }
            }
        }]
    }
});
</script>
